
  【需求规格说明书】个性化用户引导流程 V1.1 

  文档版本: 1.1

  ---

  1. 项目概述

  1.1. 项目目标
  此功能旨在通过一个动态、智能、有吸引力的引导流程，在新用户首次开启应用时，快速收集其核心健身目标、身体状况及偏好。基于这些信息，系统将即时生成一套个性化的初始健身计划，旨在：
   * 提升新用户激活率：让用户在首次会话中就获得明确、可执行的价值。
   * 增强早期留存：通过高度相关的初始内容，降低用户在第一周的流失率。
   * 建立专业信任：通过对安全、个性化等细节的关注，塑造App的专业形象。

  1.2. 成功度量指标 (Success Metrics)
   * 新用户首日任务（第一次训练）完成率提升 > 20%。
   * 新用户次日留存率提升 > 15%。
   * 引导流程完成率 > 95%。

  1.3. 用户故事 (User Stories)
   * 作为一名健身新手，我希望能快速得到一个适合我的简单计划，而不是被复杂的选项淹没，这样我才能迈出第一步。
   * 作为一名有经验的锻炼者，我希望App能理解我的水平和需求，为我提供有挑战性的计划，而不是让我从最基础的动作开始。
   * 作为一名有膝盖旧伤的用户，我希望App能在我告知情况后，智能地避开对我不安全的动作，让我可以放心锻炼。

  ---

  2. 总体设计：两阶段个性化策略

  为平衡信息收集的深度与用户体验的流畅性，我们采用“核心启动 + 渐进完善”的两阶段策略。
   * Phase 1: 核心启动流程: 强制性、一次性流程，在新用户注册后立即启动。
   * Phase 2: 渐进式完善流程: 非强制性、持续性流程，在用户后续使用过程中，通过特定时机和场景触发。

  ---

  3. Phase 1: 核心启动流程 - 详细规格

  3.1. 通用UI/UX设计
   * 布局: 严格遵守“一屏一问”原则。屏幕中央为核心问题，底部为导航按钮（“下一步”）。
   * 进度指示: 屏幕顶部必须有一个清晰的步骤指示器，格式为 步骤 X/5，让用户明确当前进度和剩余工作量。
   * 交互: 选项应设计为大尺寸、易于点击的卡片式按钮。每个卡片包含图标和简短文字。
   * 过渡动画: 页面切换使用平滑的水平滑动效果，营造流畅感。

  3.2. 步骤 1/5: 设定主要目标
   * 3.2.1. UI、问题与选项:
       * UI: 屏幕标题为“您的主要目标是？”。下方并排陈列3个带图标的卡片选项。
       * 问题与选项:
           * [减脂塑形] (图标: 火焰)
           * [增肌与力量] (图标: 肱二头肌)
           * [提升健康与活力] (图标: 跳动的心)
   * 3.2.2. 即时反馈:
       1. 视觉：被选中的按钮高亮，并出现一个 “✓” 图标。
       2. 文本：页面上出现一行小字：“目标已设定：减脂塑形。我们将为您优先推荐燃脂效率高的训练。”
       3. 触感 (移动端)：手机轻微震动一下，确认选择。
   * 3.2.3. 数据捕获: userProfile.goal = 'fat_loss' | 'muscle_gain' | 'health_improvement'

  3.3. 步骤 2/5: 评估当前水平
   * 3.3.1. UI、问题与选项:
       * UI: 屏幕标题为“您的健身经验？”。下方为3个纵向排列的选项。
       * 问题与选项:
           * [纯新手，刚开始探索]
           * [有一定经验，但曾中断过]
           * [经验丰富，寻求系统性提升]
   * 3.3.2. 即时反馈:
       1. 视觉：按钮高亮，✓ 图标。
       2. 文本 (鼓励性)：“完全没问题！每个大神都是从新手开始的。我们将从最基础、最安全的动作教起。”
       3. 触感: 同上。
   * 3.3.3. 数据捕获: userProfile.experienceLevel = 'beginner' | 'intermediate' | 'advanced'

  3.4. 步骤 3/5: 确定训练场景
   * 3.4.1. UI、问题与选项:
       * UI: 屏幕标题为“您主要在哪里锻炼？”。下方为2个带大幅配图的选项。
       * 问题与选项:
           * [居家训练] (配图: 客厅瑜伽垫)
           * [健身房] (配图: 器械区)
   * 3.4.2. 即时反馈:
       1. 视觉：按钮高亮，✓ 图标。一个代表“家”的小图标可能会出现在进度条或标题旁。
       2. 文本 (承诺性)：“收到！我们承诺，为您生成的全部计划都将匹配居家环境，无需大型器械。”
       3. 触感: 同上。
   * 3.4.3. 数据捕获: userProfile.workoutLocation = 'home' | 'gym'

  3.5. 步骤 4/5: 安全检查
   * 3.5.1. UI、问题与选项:
       * UI: 屏幕标题为“有无特殊身体状况？”。下方为允许多选的勾选框列表。
       * 问题与选项:
           * [✓] 膝盖不适
           * [✓] 腰部不适
           * [✓] 肩颈不适
           * [  ] 无，一切正常 (此项为单选，选中后其他项自动取消)
   * 3.5.2. 即时反馈:
       1. 视觉：选项被勾选。
       2. 文本 (建立信任)：用户每勾选一项，该项旁边立即出现一行小字说明系统将如何应对。例如，勾选“膝盖不适”后，其下方立即显示：“将自动过滤深蹲跳、箭步蹲跳等高冲击动作。”
   * 3.5.3. 数据捕获: userProfile.healthConditions = ['knee_discomfort', 'back_pain', ...] (数组形式)

  3.6. 步骤 5/5: 生成计划
   * 3.6.1. UI与视觉设计:
       * UI: 这是一个过渡页面，无用户交互。
       * 视觉设计: 页面中央播放一个精心设计的动画：分别代表用户选择的几个小图标（如“火焰”、“房子”、“新手”、“护膝”）从屏幕四周飞入中央，融合成一个“计划文档”图标。整个过程持续约3-5秒。
   * 3.6.2. 即时反馈:
       1. 文本 (过程展示)：动画播放期间，下方的文本应动态轮播，模拟系统的思考过程：
           * “正在分析您的减脂目标...”
           * “筛选居家训练动作库...”
           * “根据您的新手水平，匹配入门课程...”
           * “为保护膝盖，正在替换高风险动作...”
           * “您的第一个周计划即将呈现！”
   * 3.6.3. 数据捕获: 此步骤触发后端API调用，POST /api/v1/plans/generate，请求体包含前面收集的所有userProfile数据。

  3.7. 异常处理
   * 中途退出: 如果用户在流程未完成时关闭App，系统应保存已填写的进度。下次启动时，弹窗询问：“您上次的个性化设置还未完成，要继续吗？” [继续] [重新开始]。
   * 网络错误: 在步骤5/5调用API失败时，页面应显示错误提示：“网络连接失败，无法生成计划。”并提供一个[重试]按钮。

  ---

  4. Phase 2: 渐进式完善流程 - 详细规格

  4.1. 目标与策略
   * 目标：在用户使用App的过程中，通过不同的“触发点”，引导他们补充更多信息，从而将“启动计划”逐步精炼成“完美计划”。
   * 策略：每个模块都应遵循“告知用户收益 -> 提问 -> 即时功能反馈”的模式。

  4.2. 触发逻辑与规则

  ┌─────────────────┬───────────────────────────────────────┬─────────────────┬────────────────────────────────────────┐
  │ 触发器名称      │ 触发事件                              │ 目标模块        │ UI展现形式                             │
  ├─────────────────┼───────────────────────────────────────┼─────────────────┼────────────────────────────────────────┤
  │ Post-Workout    │ 用户完成首次训练                      │ 模块A: 训练偏好 │ 结束页的全屏卡片                       │
  │ Profile Nudge   │ 用户进入“我的”页面，且档案完成度<80%  │ 所有未完成模块  │ “健身档案”入口旁的进度条和“待完善”提示 │
  │ Equipment Nudge │ 用户在首页停留超过5秒，且设备信息为空 │ 模块B: 设备清单 │ 首页信息流中的提示卡片                 │
  │ Nutrition Entry │ 用户首次点击“饮食”Tab                 │ 模块D: 饮食营养 │ 模态弹窗 (Modal)                       │
  └─────────────────┴───────────────────────────────────────┴─────────────────┴────────────────────────────────────────┘

  4.3. 模块规格详解

   * 4.3.1. 模块A - 训练偏好
       * 用户收益：“让您的计划更有趣，更贴合您的生活节奏。”
       * 问题: 1. 您对哪些活动感兴趣？(HIIT, 瑜伽, 跑步...) 2. 您计划每周锻炼几天？(1-2, 3-4, 5+)。
       * 即时反馈: 用户返回“计划”日历视图时，看到本周的训练日立刻从3天变成了4天。页面底部出现提示条(Snackbar)：“计划已更新为每周4练，加油！”

   * 4.3.2. 模块B - 设备清单
       * 用户收益: “解锁海量新动作，让您的训练不再单调。”
       * 问题: “您拥有哪些设备？” (多选勾选框，带图标) [✓] 瑜伽垫 [✓] 哑铃 (请选择重量范围) [✓] 弹力带...
       * 即时反馈: 当用户返回“训练”或“发现”页面时，立即看到内容发生了变化。例如，出现了一个新的“哑铃专项训练”栏目。弹出提示(Toast)：“太棒了！我们已为您的计划解锁了50+个新的哑铃动作。”

   * 4.3.3. 模块C - 动机与挑战
       * 用户收益: “我们将用您最喜欢的方式，帮您保持动力，克服障碍。”
       * 问题: 1. 什么最能激励您？(看到变化, 解锁成就...) 2. 您觉得坚持最大的挑战是？(没时间, 没动力...）。
       * 即时反馈: 回答完毕后，立即弹出一个获得徽章的庆祝动画。文本：“恭喜！获得您的第一枚徽章：「自我洞察」。未来，我们将用更多挑战来满足您的好胜心！”

   * 4.3.4. 模块D - 饮食与营养
       * 用户收益: “获得与您训练目标相匹配的饮食建议。”
       * 问题: 1. 您的饮食习惯是？(均衡, 素食, 常外卖...) 2. 您的饮水量？
       * 即时反馈: 在“饮食建议”板块，立刻出现一个针对性的新卡片。卡片标题：“告别油腻外卖的第一步”，内容是一些15分钟快手健康餐的食谱推荐。

   * 4.3.5. 模块E - 身体数据
       * 用户收益: “更精准地追踪您的身体变化，科学调整恢复与训练强度。”
       * 问题: 1. (通过图片)您目前的体型和目标体型？ 2. 您的睡眠质量如何？ 3. (作为基准测试)您现在能做多少俯卧撑？
       * 即时反馈: 提交后，数据报告页的图表或基准值立即更新。

  ---

  5. 排期建议
   * 第一期 (MVP): 完整实现 Phase 1。
   * 第二期 (功能拓展): 搭建 Phase 2 框架，并优先实现 模块A (偏好) 和 模块B (设备)。
   * 第三期 (体验增强): 实现 模块C, D, E。