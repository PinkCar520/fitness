### **产品需求文档 (PRD): 动态周期性计划系统**

**1. 愿景与目标**

*   **1.1. 产品愿景:**
    打造一个智能、灵活且人性化的健身体验。通过将长期目标分解为短期、可执行的周计划，帮助用户建立持续的动力，减轻因目标过于宏大而产生的心理压力和挫败感。

*   **1.2. 解决的核心问题:**
    *   **目标模糊/遥远:** 用户设定了“减重10公斤”等长期目标后，缺乏清晰的、每日可执行的路径。
    *   **执行压力大:** 面对长达数月的目标，用户容易产生畏难情绪和压力，难以坚持。
    *   **缺乏灵活性:** 用户的目标和生活状态会变化，需要一个能随时调整，开启新篇章的计划系统。

*   **1.3. 成功指标:**
    *   **计划采纳率:** 创建“活动计划”的用户比例。
    *   **周计划完成率:** 用户每周完成计划内任务的比例。
    *   **用户留存率:** 功能上线后，用户在接下来1-3个月内的留存情况。

**2. 核心用户流程**

1.  新用户或无计划用户进入主界面，看到引导其**“制定新计划”**的入口。
2.  用户点击入口，进入计划设定流程，设定**主要目标**（如减脂/增肌）、**总天数**（如30天）及其他个人偏好。
3.  系统根据用户输入，生成一个完整的**“活动计划”**（例如一个30天的完整计划）。
4.  用户回到主界面，界面上默认展示该“活动计划”中**本周**的锻炼和饮食安排。
5.  用户可通过顶部的**日历**，在当前“活动计划”的有效日期内前后翻阅，查看其他周的计划安排。
6.  在任何时候，用户都可以选择**“重新制定计划”**，开启一个新的“活动计划”。旧计划将被自动存入**“历史计划”**。
7.  用户可以通过个人中心等入口，访问**“历史计划”**列表，回顾自己过往的健身旅程。

**3. 功能详述 (Feature Breakdown)**

*   **3.1. 核心功能：活动计划 (Active Plan)**
    *   **3.1.1. 计划生成器:**
        *   提供一个独立的设置流程，用于创建新的“活动计划”。
        *   用户可自定义**目标**（减脂、增肌、保持健康等）、**总时长**（以天为单位）以及**偏好**（每周锻炼频率、饮食风格等）。
        *   系统根据输入，算法生成覆盖整个时长的、每日的锻炼与饮食计划。
    *   **3.1.2. 计划替换与存档:**
        *   系统内只存在一个“当前活动计划”。
        *   当用户创建新计划时，系统会提示当前计划将被覆盖和存档。
        *   确认后，旧计划连同其起止日期、完成状态等完整信息，被移入“历史计划”数据库。

*   **3.2. 主界面：本周焦点 (Weekly Focus)**
    *   **3.2.1. 周计划展示模块:**
        *   主界面核心区域，用于展示当前“活动计划”中本周（周一至周日）的计划。
        *   清晰列出本周每一天的锻炼任务和饮食概要。
    *   **3.2.2. 日历联动:**
        *   日历与周计划模块双向联动。点击日历中的某一天，下方模块自动刷新，展示该日期所在周的计划。
        *   日历需要能清晰地**高亮**出当前“活动计划”的整个时间范围（例如，在30天的计划周期内，这30天在日历上有特殊标记）。

*   **3.3. 历史计划回顾 (Plan History)**
    *   **3.3.1. 历史列表页:**
        *   提供一个独立的“历史计划”页面。
        *   按时间倒序（最新的在前）陈列所有已完成或被替换的旧计划。
        *   列表项应包含关键信息，如“30天减脂计划”以及其起止日期“2025.08.01 - 2025.08.30”。
    *   **3.3.2. 历史详情页:**
        *   点击任一历史计划，可以查看该计划在当时完整的、每日的安排详情。此视图为只读模式。

**4. 数据模型需求 (High-Level)**

*   需要一个 `Plan` 模型，用于存储整个“活动计划”。应包含：
    *   `planID` (唯一标识)
    *   `planName` (例如“30天减脂挑战”)
    *   `startDate`, `endDate` (起止日期)
    *   `status` (活动/已存档)
    *   `dailyTasks`: 一个包含每日具体任务（锻炼、饮食）的数组或对象集合。

**5. V1版本暂不包含 (Out of Scope)**

*   计划分享功能。
*   同时执行多个“活动计划”。
*   根据用户每日完成情况，动态调整后续未执行的计划内容。
