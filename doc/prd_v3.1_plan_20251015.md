### **下一阶段版本规划：V3.1 - 身体蜕变与计划执行**

#### **1. 版本愿景**

赋能用户更直观地见证身体的蜕变，并更有效地执行和追踪他们的个性化健身计划。通过提供强大的视觉反馈和计划管理工具，进一步提升用户粘性和成就感。

#### **2. 核心目标**

-   **增强用户激励:** 通过视觉化方式，让用户清晰看到自己的身体变化。
-   **提升计划执行力:** 闭环计划的“制定”到“执行”和“追踪”过程。
-   **深化数据洞察:** 提供更细致的运动表现分析。

#### **3. 关键功能 (Key Features)**

##### **3.1. 身体档案 - 视觉记录 (Body Profile - Visual Records)**
*   **用户价值:** 身体形态的直观变化是用户最大的动力来源。
*   **功能描述:**
    -   在“身体档案”标签页内，新增一个模块，允许用户上传或拍摄不同时期的身体照片。
    -   照片需自动或手动关联拍摄日期。
    -   提供“对比视图”，用户可以选择两张不同日期的照片进行左右或上下对比，直观查看身体变化。
    -   支持照片的简单管理（查看、删除）。
*   **优先级:** **高** (完成当前“身体档案”页面的缺失功能，提供强激励)

##### **3.2. 计划 - 沉浸式任务执行与追踪 (Plan - Immersive Task Execution & Tracking)**
*   **用户价值:** 将“计划”从静态的查看变为动态的、流畅的执行过程，完美贴合用户真实的训练场景，显著提升计划的实用性和用户的参与度。
*   **详细功能描述:**
    *   **3.2.1. 交互入口：从“静态列表”到“交互式卡片”**
        -   “计划”页的每日锻炼列表将进行重新设计，每个锻炼项将以独立的“交互式卡片”形式呈现。
        -   每张卡片上除了显示锻炼基本信息外，还将包含一个醒目的 **“开始训练”** 按钮作为核心交互入口。
    *   **3.2.2. 核心体验：“沉浸式执行中”模式**
        -   点击“开始训练”后，用户将进入一个全屏的、无干扰的“训练中”界面。
        -   **力量训练:** 界面将以列表形式展示当前动作的所有组，用户可在每组完成后，直接在行内（inline）输入实际完成的`次数`和`重量`。完成一组后，系统将自动启动可配置的`组间休息`计时器。
        -   **有氧训练:** 界面将提供一个醒目的`实时计时器`（秒表），并辅以`距离`等关键指标的录入字段。
        -   用户可在训练会话中的不同动作之间自由导航和切换。
    *   **3.2.3. 结束与反馈：保存记录与状态更新**
        -   用户可随时点击“结束训练”来完成整个训练会话。系统将把本次会话中记录的所有详细数据，汇总并创建为一条**新的、完整的 `Workout` 历史记录**。
        -   成功结束后，“计划”页上对应的训练卡片状态将更新为“已完成 ✅”，提供清晰的视觉反馈。
    *   **3.2.4. 健壮性：中断与恢复**
        -   系统需具备中断恢复能力。当用户因故（如接听电话、App崩溃）中断训练后再次打开App，应提示用户是否恢复到上次的训练会话。
*   **优先级:** **高** (闭环核心功能，提升App实用性)

    *   **3.2.5. 开发进度 (Development Status)**
        *   **已完成 (Completed):**
            *   数据模型 (`Workout`) 已扩展，包含 `type` (枚举)、`sets` (`[WorkoutSet]`)、`distance`、`duration` 等字段。
            *   `WorkoutSet` 结构体已创建，包含 `reps`、`weight`、`isCompleted` 属性。
            *   `PlanView` 已改造，显示 `WorkoutPlanCardView`，并添加了“开始今日训练”按钮。
            *   `LiveWorkoutView` 和 `WorkoutSessionManager` 已基于 `DailyTask` 进行重构，支持多动作训练会话。
            *   `LiveWorkoutView` 已实现总耗时、休息计时器、当前动作进度显示。
            *   `LiveWorkoutView` 已实现力量训练（组列表、行内输入）和有氧训练（距离、时长输入）的UI。
            *   `WorkoutSessionManager` 已实现 `startWorkout`、`nextExercise`、`endWorkout` 逻辑，支持保存会话中所有完成的动作。
            *   `WorkoutSummaryView` 已创建，并在训练结束后自动呈现。
        *   **未完成 (Pending):**
            *   “其他”训练类型UI (`workout.type == .other`) 仍是占位符，需要实现通用输入UI或明确范围。
            *   计划中的组数据 (`Workout` 的 `sets` 属性) 尚未与 `PlanViewModel` 的 `generatePlan` 逻辑集成，目前仍依赖默认值或手动设置。
            *   卡路里消耗 (`caloriesBurned`) 仍是占位符，需要根据实际训练数据进行计算。
            *   触觉反馈、确认对话框、更完善的错误处理、UI细节优化等。
            *   恢复中断训练的逻辑尚未实现。

##### **3.3. 统计 - 运动类型与表现分析 (Stats - Workout Type & Performance Analysis)**
*   **用户价值:** 帮助用户更全面地理解自己的训练结构和表现水平。
*   **功能描述:**
    -   在“统计”标签页中，新增图表：
        -   **运动类型分布饼图:** 展示用户在选定时间范围内，不同运动类型（如力量、有氧、瑜伽）的时长或次数占比。
        -   **个人最佳记录 (PRs) 展示:** 突出显示用户在特定锻炼项目（如跑步最快5公里、卧推最大重量）上的个人最佳成绩。
*   **优先级:** **中** (深化数据洞察，提供进阶分析)

#### **4. 暂不包含 (Out of Scope for V3.1)**

-   **好友功能 (Friends Feature):** 作为一个大型社交模块，将留待 V3.2 或 V4.0 等更大型的版本中进行规划和开发。
-   **更复杂的智能推荐系统:** 现有推荐系统将保持不变。
-   **UI/UX 大幅优化:** 本版本主要聚焦功能实现，UI/UX优化将作为持续性工作。

---

**总结:**

V3.1版本将聚焦于**“身体档案”的视觉化**和**“计划”的执行化**，同时对“统计”功能进行有针对性的增强。这将为用户提供更完整、更具激励性的健身体验。